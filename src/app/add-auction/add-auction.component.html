
<terra-portlet
        [inputPortletHeader]="formName">

    <form class="m-x-1" (ng-Submit)="onSubmit()" #addAuctionForm="ngForm">
        <div class="row">
            <terra-number-input class="col-md-3" id="itemId" required
                    [inputName]="'Artikel ID'"
                    [(ngModel)]="auction.itemId" name="itemId"
                    [inputIsRequired]="true"
                    [inputEmptyMessage]="'Bitte Artikelnummer eingeben'"
                    [inputInvalidMessage]="'Bitte etwas eingeben'"
                    [inputTooltipText]=""
                    [inputTooltipPlacement]="'top'"
                    [inputIsDisabled]="itemIdIsDisabled"
                    [inputMinValue]="1"
                    [inputMaxValue]="1000000"
                    [inputMinLength]="1"
                    [inputMaxLength]="10"
            ></terra-number-input>

            <terra-button class="m-r-1"
                    [inputIsDisabled]="!addAuctionForm.form.valid ||
                        inputDate.value <= startDateInput.substring(0,10) ||
                        buyNowPrice.value <= startPrice.value + 1 &&
                        buyNowPrice.value != 0"
                    [inputCaption]="buttonName"
                    [inputIsLarge]="true"
                    [inputTooltipText]="'save new auction'"
                    [inputTooltipPlacement]="'top'"
                    [inputIcon]="'icon-save'"
                    [inputIsPrimary]="true"
                    (outputClicked)="saveButtonClick()"></terra-button>
            <div>
                <terra-button [inputTooltipText]="'Neu Laden'"
                        [inputIsPrimary]="false"
                        [inputIsSecondary]="true"
                        [inputIsLarge]="true"
                        (outputClicked)="updateView()"
                        [inputIcon]="'icon-reload'"></terra-button>
            </div>


        </div>
        <div class="row">
            <terra-date-picker class="col-md-3" id="startDate" required
                    [(ngModel)]="startDate" name="startDate"
                    [inputName]="'Start Datum'"
                    [inputIsRequired]="true"
                    #inputDate="ngModel"
            >
            </terra-date-picker>
            <terra-select-box class="col-md-3" id="startHour" required
                    [(ngModel)]="auction.startHour" name="startHour"
                    [inputName]="'Stunde'"
                    [inputIsRequired]="true"
                    [inputListBoxValues]="_hourValues"
                    [inputTooltipText]="'Start-Stunde auswählen'"
                    [inputTooltipPlacement]="'top'">
            </terra-select-box>

            <terra-select-box class="col-md-3" id="startMinute" required
                    [(ngModel)]="auction.startMinute" name="startMinute"
                    [inputName]="'Minute'"
                    [inputIsRequired]="true"
                    [inputListBoxValues]="_minuteValues"
                    [inputTooltipText]="'Start-Minute auswählen'"
                    [inputTooltipPlacement]="'top'"></terra-select-box>

            <terra-select-box class="col-md-3" id="auctionDuration" required
                    [(ngModel)]="auction.auctionDuration" name="auctionDuration"
                    [inputName]="'Auktions Dauer'"
                    [inputIsRequired]="true"
                    [inputListBoxValues]="_durationValues"
                    [inputTooltipText]="'Dauer der Auktion'"
                    [inputTooltipPlacement]="'top'"></terra-select-box>
        </div>

        <div class="row">
            <terra-double-input class="col-md-3" id="startPrice" required
                    [(ngModel)]="auction.startPrice" name="startPrice"
                    [inputName]="'Start Preis'"
                    [inputMinValue]="1"
                    [inputIsRequired]="true"
                    #startPrice="ngModel">
            </terra-double-input>

            <terra-double-input class="col-md-3" id="buyNowPrice" required
                    [(ngModel)]="auction.buyNowPrice" name="buyNowPrice"
                    [inputName]="'Sofort-Kaufen Preis'"
                    [inputMinValue]="startPrice.value + 1"
                    [inputIsRequired]="true"
                    #buyNowPrice="ngModel">
            </terra-double-input>

            <div [hidden]="buyNowPrice.valid && buyNowPrice.value >= startPrice.value + 1 || buyNowPrice.value === 0"
                    class="alert alert-danger">
                Der Sofort-Kaufen Preis muss mind. 1€ größer als der Start Preis sein. (oder '0')!
            </div>
        </div>
        <div [hidden]="inputDate.value >= startDateInput.substring(0,10)"
                class="alert alert-danger">
            Das Startdatum darf nicht in der Vergangenheit liegen!
        </div>
    </form>
</terra-portlet>


<hr class="m-y-2">


<terra-simple-table
        #table
        [inputIsStriped]="true"
        [inputUseHighlighting]="true"
        [inputHeaderList]="headerList"
        [inputRowList]="rowList"
></terra-simple-table>


